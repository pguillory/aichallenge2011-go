package main

import "testing"

func TestSituation(t *testing.T) {
    terrain := NewTerrain(
    "b.%*...........................\n" +
    "aB2?...........................\n" +
    "...............................\n" +
    "...............................\n" +
    "...............................\n" +
    "...............................\n" +
    "...............................\n" +
    "...............................\n" +
    "...............................\n" +
    "...............................\n" +
    "...............................\n" +
    "...............................\n" +
    "...............................")

    expectation :=
	"   ...   \n" + 
	" ....... \n" + 
	" ....... \n" + 
	".........\n" + 
	"....a.%*.\n" + 
	"....bA1..\n" + 
	" ....... \n" + 
	" ....... \n" + 
	"   ...   "

    situation, friendlyNearby := NewSituation(terrain, Point{0, 0})

    if situation.String() != expectation {
        t.Error(situation)
    }
    if friendlyNearby != true {
        t.Errorf("friendlyNearby: %v", friendlyNearby)
    }
}
