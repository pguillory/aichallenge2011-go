package main

import "testing"

func TestRepulsion(t *testing.T) {
    terrain := NewTerrain(
        "..........................\n" +
        ".0.1.*.%..................\n" +
        ".b........................\n" +
        "..........................\n" +
        "..........................\n" +
        "..........................\n" +
        "..........................\n" +
        "..........................\n" +
        "..........................\n" +
        "..........................\n" +
        "..........................\n" +
        "..........................\n" +
        "..........................\n" +
        "..........................\n" +
        ".....................a....\n" +
        "........................a.\n" +
        "..........................")

    expectedNorth := 
        "22111100000000011222222222\n" +
        "22111000000000011122222222\n" +
        "21111000000000001122222222\n" +
        "11110000000000000112222222\n" +
        "11100000000000000001222211\n" +
        "10000000000000000000001111\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "11100000000000111111111111\n" +
        "22211100000000111222222222"

    expectedEast :=
        "00000000000000011222211100\n" +
        "00000000000000011122211100\n" +
        "00000000000000001122211100\n" +
        "00000000000000000112211100\n" +
        "00000000000000000001211100\n" +
        "00000000000000000000001100\n" +
        "00000000000000000000000000\n" +
        "00000000000000000001100000\n" +
        "00000000000000000111101100\n" +
        "00000000000000001111211100\n" +
        "00000000000000011112211100\n" +
        "00000000000000011122211100\n" +
        "00000000000000111122211100\n" +
        "00000000000000111222211100\n" +
        "00000000000000111222211100\n" +
        "00000000000000111222211100\n" +
        "00000000000000111222211100"

    expectedSouth :=
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000001111100\n" +
        "10000000000000000111112222\n" +
        "21100000000000001111222222\n" +
        "22110000000000011112222222\n" +
        "22111000000000011122222222\n" +
        "22211000000000111122222222\n" +
        "22211100000000111222222222\n" +
        "11111100000000000111111111\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000"

    expectedWest :=
        "22111100000000000000001112\n" +
        "22111000000000000000001112\n" +
        "21111000000000000000001112\n" +
        "11110000000000000000001112\n" +
        "11100000000000000000001101\n" +
        "10000000000000000000000001\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000001100\n" +
        "10000000000000000000001112\n" +
        "21100000000000000000001112\n" +
        "22110000000000000000001112\n" +
        "22111000000000000000001112\n" +
        "22211000000000000000001112\n" +
        "22211100000000000000001112\n" +
        "22211100000000000000001112\n" +
        "22211100000000000000001112\n" +
        "22211100000000000000001112"

    expectedStay :=
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000\n" +
        "00000000000000000000000000"

    repulsion := NewRepulsion(terrain)

    if repulsion.StringFor(NORTH) != expectedNorth {
        t.Error("NORTH:\n" + repulsion.StringFor(NORTH))
    }
    if repulsion.StringFor(EAST) != expectedEast {
        t.Error("EAST:\n" + repulsion.StringFor(EAST))
    }
    if repulsion.StringFor(SOUTH) != expectedSouth {
        t.Error("SOUTH:\n" + repulsion.StringFor(SOUTH))
    }
    if repulsion.StringFor(WEST) != expectedWest {
        t.Error("WEST:\n" + repulsion.StringFor(WEST))
    }
    if repulsion.StringFor(STAY) != expectedStay {
        t.Error("STAY:\n" + repulsion.StringFor(STAY))
    }
}
