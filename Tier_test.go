package main

import "testing"

/*
func TestTier(t *testing.T) {
    terrain := NewTerrain(
        "%%%%%%%%%\n" +
        "%a%...%b%\n" +
        "%.%.%.%.%\n" +
        "%...%...%\n" +
        "%%%%%%%%%")

    expected :=
        "000000000\n" +
        "010111000\n" +
        "010101010\n" +
        "011101110\n" +
        "000000000"

    mystery := NewMystery(terrain)
    potentialEnemy := NewPotentialEnemy(terrain)
    tier := NewTier(terrain, mystery, potentialEnemy)


    if tier.String() != expected {
        t.Error(terrain)
        t.Error(tier)
    }
}

func TestTierLength(t *testing.T) {
    terrain := NewTerrain(
        "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n" +
        "%.................................................1\n" +
        "%.%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n" +
        "%.................................................%\n" +
        "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%.%\n" +
        "%.................................................%\n" +
        "%.%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n" +
        "%.................................................%\n" +
        "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%.%\n" +
        "%.................................................%\n" +
        "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%")

    expected :=
        "000000000000000000000000000000000000000000000000000\n" +
        "011111111111111111111111111111111111111111111111110\n" +
        "010000000000000000000000000000000000000000000000000\n" +
        "022222222222222222222222222222222222222222222222220\n" +
        "000000000000000000000000000000000000000000000000020\n" +
        "033333333333333333333333333333333333333333333333330\n" +
        "030000000000000000000000000000000000000000000000000\n" +
        "044444444444444444444444444444444444444444444444440\n" +
        "000000000000000000000000000000000000000000000000040\n" +
        "055555555555555555555555555555555555555555555555550\n" +
        "000000000000000000000000000000000000000000000000000"

    mystery := NewMystery(terrain)
    potentialEnemy := NewPotentialEnemy(terrain)
    tier := NewTier(terrain, mystery, potentialEnemy)

    if tier.String() != expected {
        t.Error(terrain)
        t.Error(tier)
        t.Error(tier.distanceAt[2][1])
        t.Error(tier.distanceAt[6][1])
    }
}
*/

func TestTierInTheOpen(t *testing.T) {
    terrain := NewTerrain(
        "%%%%%%%\n" +
        "%1.aa.%\n" +
        "%.....%\n" +
        "%%%%%%%")

    expected :=
        "0000000\n" +
        "0011110\n" +
        "0111110\n" +
        "0000000"

    mystery := NewMystery(terrain)
    potentialEnemy := NewPotentialEnemy(terrain)
    tier := NewTier(terrain, mystery, potentialEnemy)

    if tier.String() != expected {
        t.Error(terrain)
        t.Error(tier)
    }
}

func TestTierDepth(t *testing.T) {
    terrain := NewTerrain(
        "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n" +
        "%........................................%\n" +
        "%.1..a..aa..aaa..aaaa..aaaaa.............%\n" +
        "%.......aa..aaa..aaaa..aaaaa.............%\n" +
        "%...........aaa..aaaa..aaaaa.............%\n" +
        "%................aaaa..aaaaa.............%\n" +
        "%......................aaaaa.............%\n" +
        "%........................................%\n" +
        "%%%%%%%%%%%%%%...........................%\n" +
        "%....aaaaaaaa............................%\n" +
        "%....aaaaaaaa............................%\n" +
        "%....aaaaaaaa............................%\n" +
        "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%")

    expected :=
        "000000000000000000000000000000000000000000\n" +
        "011111111111111111111111111111111111111110\n" +
        "010111111111111111111111111111111111111110\n" +
        "011111111111121111221111222111111111111110\n" +
        "011111111111111111221111232111111111111110\n" +
        "011111111111111111111111222111111111111110\n" +
        "011111111111111111111111111111111111111110\n" +
        "011111111111111111111111111111111111111110\n" +
        "000000000000001111111111111111111111111110\n" +
        "099998765432111111111111111111111111111110\n" +
        "099998765432111111111111111111111111111110\n" +
        "099998765432111111111111111111111111111110\n" +
        "000000000000000000000000000000000000000000"

    mystery := NewMystery(terrain)
    potentialEnemy := NewPotentialEnemy(terrain)
    tier := NewTier(terrain, mystery, potentialEnemy)

    if tier.String() != expected {
        t.Error(terrain)
        t.Error(tier)
    }
}
